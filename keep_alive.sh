#!/bin/bash

# å¦‚éœ€ç»™ Binance è®¾ç½®ä»£ç†ï¼Œè¯·åœ¨ config.local.json é‡Œé…ç½® binance_proxy_url
# ä¸å†ä½¿ç”¨å…¨å±€ HTTP(S)_PROXYï¼Œé¿å…å½±å“ AI æ¥å£

# ç¼–è¯‘ç¨‹åº (æ¯” go run æ›´ç¨³å®š)
echo "æ­£åœ¨ç¼–è¯‘..."
go build -o simple_ai_trader_bin .
if [ $? -ne 0 ]; then
    echo "ç¼–è¯‘å¤±è´¥ï¼Œè¯·æ£€æŸ¥ä»£ç é”™è¯¯"
    exit 1
fi

echo "âœ… ç¼–è¯‘æˆåŠŸï¼Œå‡†å¤‡å¯åŠ¨ 7*24 å°æ—¶å®ˆæŠ¤è¿›ç¨‹..."
echo "æç¤º: ä½¿ç”¨ Ctrl+C å¯ä»¥åœæ­¢å¾ªç¯"

# å¾ªç¯å¯åŠ¨
while true; do
    echo "----------------------------------------"
    echo "ğŸš€ æ­£åœ¨å¯åŠ¨äº¤æ˜“ç¨‹åº: $(date)"
    echo "----------------------------------------"
    
    # è¿è¡Œç¨‹åºï¼Œå¹¶å°†æ—¥å¿—åŒæ—¶è¾“å‡ºåˆ°å±å¹•å’Œæ–‡ä»¶
    ./simple_ai_trader_bin | tee -a trader.log
    
    echo "âš ï¸ ç¨‹åºå¼‚å¸¸é€€å‡º (Exit Code: $?). 5ç§’åé‡å¯..."
    sleep 5
done
